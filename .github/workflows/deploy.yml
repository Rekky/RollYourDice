name: Deploy angular to FTP server
on:
    push:
        branches:
            - master
jobs:
    deploy:
    runs-on: ubuntu-latest

    strategy:
        matrix:
            node-version: [ 12.x, 13.x, 14.x ]

    steps:
        -   uses: actions/checkout@v2

        -   name: Use node.js ${{ matrix.node-version }}
            uses: actions/setup-node@v2
            with:
                node-version: ${{ matrix.node-version }}

        -   name: Cache node modules
            id: cache-node-modules
            uses: actions/cache@v2
            env:
                cache-name: cache-node-modules
            with:
                path: node_modules
                key: ${{ runner.os }}-build-${{ env.cache-name }}-${{ hashFiles('**/package-lock.json') }}
                restore-keys: |
                    ${{ runner.os }}-build-${{ env.cache-name }}-
                    ${{ runner.os }}-build-
                    ${{ runner.os }}-

#        -   name: Install dependencies
#            if: steps.cache-nodemodules.outputs.cache-hit != 'true'
#                run: npm install

        -   name: Build
            runs: npm run build --prod

#    - name: "Deploy to FTP"
#      uses: SamKirkland/FTP-Deploy-Action@3.1.1
#      with:
#        host: ${{ secrets.HOST }}
#        username: ${{ secrets.USERNAME }}
#        password: ${{ secrets.PASSWORD }}
#        port: ${{ secrets.PORT }}
#        local-dir: game

